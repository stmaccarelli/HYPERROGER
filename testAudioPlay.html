<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>testaudioplay</title>
  </head>
  <body>


    <script type="text/javascript">
    var fftArray = [
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],

      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],

      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],

      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],

      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],

      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],

      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],

      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],

      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
      [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123], [0.123,0.123,0.123],
    ];


    // let's assume fftArray has 60 frames per second, every frame is a serialized string

    var audioObject = function(audioFilePath, fftArray, fps){

      var _p = audioObject.prototype;
      var _f = this;

      var audioFile = new Audio(audioFilePath);
      if (fftArray === undefined) return false;

      var currentTime = 0;
      var duration = audioFile.duration;
      var frameIndex = null;

      function start(){
        audioFile.play();
        analyze();
      }

      function pause(){
        audioFile.pause();
        // pause analyze;
      }

      function analyze(){
        if(audioFile.currentTime > audioFile.duration)
          return 1;
        requestAnimationFrame(_p.analyze);
        var frameIndex = Math.round(
          audioFile.currentTime/60
        );
      }

      function get(freqIndex){ // which frequency do you want?
        // if(frameIndex!==null && frameIndex < fftArray.length)
          return fftArray[frameIndex%fftArray.length][freqIndex];
        // else
        //   return false;
      }

      _p.start = start;
      _p.get = get;
      _p.pause = pause;
      _p.audioFile = audioFile;
      _p.analyze = analyze;

      return _p;

    }
    </script>
  </body>
</html>
